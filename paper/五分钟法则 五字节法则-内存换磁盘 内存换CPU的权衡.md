# 五分钟法则/五字节法则-内存换磁盘/内存换CPU的权衡
## 概要
Jim Gray和Franco Putzolu 在1986年发布的论文《The 5 Minute Rule for Trading Memory for Disc Accesses and the 5 Byte Rule for Trading Memory for CPU Time》中介绍了这两个法则，分别用来权衡内存换磁盘以及内存换cpu。

## 五分钟法则
以内存换取磁盘操作是很常见的操作，并衍生出众多缓存算法，五分钟法则便是为了帮助权衡什么时候适宜使用内存换取磁盘操作。
磁盘的特点：便宜、慢，所以磁盘是 轻容量而重io的。内存的特点：贵、快，所以内存是 重容量而轻io的。
两者正好处在对立面，在抉择中便存在平衡点以确定是使用哪种方案。

对于固定价格，固定io的磁盘，可以计算出每秒单io操作的价格CostDisk。
对于固定价格，固定容量的内存，可以计算出固定容量的价格CostMem。

当每次io读写的存储量固定时，CostMem是固定的，此时随着io间隔增加CostDisk是单调递减的，当CostDisk<CostMem时，使用磁盘的效益比较高，论文作者按照当时的价格计算出，每隔5min这个效益偏向磁盘，所以此法则名为五分钟法则。

PS. 
论文中作者使用了1KB的读写单位，随着读写单位增加CostMem单调递增，此时会在更短的间隔到达平衡点
也就是说，读写单位越大时，考虑内存替换磁盘的io间隔越短。

## 五字节法则
五字节法则没有上文出名，个人考虑原因是：因为内存比磁盘快所以内存换取磁盘是比较有价值的，而cpu本身处于比内存更高的层级，所以使用内存换取cpu就没有那么大的意义了。

五字节法则是依赖于程序员可以设计上以大内存换取少的cpu指令，作者举的例子是：因为内存读写是按照字节为单位的，当需要读写bit时需要额外引入位操作，程序员可以选择使用1byte存储1bit来使用内存换取cpu。
通过计算每条指令的价格CostCpu与每字节内存的价格CostMem，当优化后节省的cpu耗费的资源>增加的men耗费的资源时，便可以考虑使用内存换取cpu。

## 参考链接
[论文原文](https://dsf.berkeley.edu/cs286/papers/fiveminute-tr1986.pdf)
[论文译文](http://duanple.com/?p=122)
